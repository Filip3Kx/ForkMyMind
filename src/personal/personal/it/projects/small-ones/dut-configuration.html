<!DOCTYPE html>
<html>

<head>

  <title>DUT Configuration</title>
  <base href="../../../../">
  <meta id="root-path" root-path="../../../../">

  <link rel="icon" sizes="96x96" href="https://publish-01.obsidian.md/access/f786db9fac45774fa4f0d8112e232d67/favicon-96x96.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
  <meta charset="UTF-8">
  <script src="https://code.iconify.design/iconify-icon/1.0.3/iconify-icon.min.js"></script>

  <link rel="stylesheet" href="lib/styles/obsidian-styles.css">
  <link rel="stylesheet" href="lib/styles/theme.css">
  <link rel="stylesheet" href="lib/styles/plugin-styles.css">
  <link rel="stylesheet" href="lib/styles/snippets.css">
  <style> </style>


  <script src="lib/scripts/webpage.js"></script>

</head>

<body class="theme-dark mod-windows is-frameless is-hidden-frameless obsidian-app show-inline-title show-view-header is-maximized" style="--zoom-factor:1; --font-text-size:16px; --line-width:50em; --line-width-adaptive:50em; --file-line-width:50em; --content-width:500em; --sidebar-width:25em; --collapse-arrow-size:0.4em; --tree-horizontal-spacing:1em; --tree-vertical-spacing:0.5em; --sidebar-margin:12px;">
  <div class="webpage-container">
    <div class="sidebar-left sidebar">
      <div class="sidebar-content">
        <div><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle">
            <div class="toggle-background"></div>
          </label></div>
        <div class="tree-container file-tree mod-nav-indicator" data-depth="0">
          <div class="tree-header"><span class="sidebar-section-header">DEV_OPS</span><button class="clickable-icon collapse-tree-button is-collapsed"><iconify-icon icon="ph:arrows-in-line-horizontal-bold" width="18px" height="18px" rotate="90deg" color="currentColor"></iconify-icon></button></div>
          <div class="tree-scroll-area">
            <div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="1">
              <div class="tree-item-contents">
                <div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle">
                    <path d="M3 8L12 17L21 8"></path>
                  </svg></div><a class="tree-item-link" href="personal"><span class="tree-item-title">Personal</span></a>
              </div>
              <div class="tree-item-children">
                <div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2">
                  <div class="tree-item-contents">
                    <div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle">
                        <path d="M3 8L12 17L21 8"></path>
                      </svg></div><a class="tree-item-link" href="personal/it"><span class="tree-item-title">IT</span></a>
                  </div>
                  <div class="tree-item-children">
                    <div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="3">
                      <div class="tree-item-contents">
                        <div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle">
                            <path d="M3 8L12 17L21 8"></path>
                          </svg></div><a class="tree-item-link" href="personal/it/projects"><span class="tree-item-title">Projects</span></a>
                      </div>
                      <div class="tree-item-children">
                        <div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="4">
                          <div class="tree-item-contents">
                            <div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle">
                                <path d="M3 8L12 17L21 8"></path>
                              </svg></div><a class="tree-item-link" href="personal/it/projects/course"><span class="tree-item-title">Course</span></a>
                          </div>
                          <div class="tree-item-children">
                            <div class="tree-item mod-tree-file" data-depth="5">
                              <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/projects/course/httpd-+-wordpress.html"><span class="tree-item-title">HTTPD + Wordpress</span></a></div>
                              <div class="tree-item-children"></div>
                            </div>
                            <div class="tree-item mod-tree-file" data-depth="5">
                              <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/projects/course/jenkins-obsidian-pipeline.html"><span class="tree-item-title">Jenkins Obsidian pipeline</span></a></div>
                              <div class="tree-item-children"></div>
                            </div>
                            <div class="tree-item mod-tree-file" data-depth="5">
                              <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/projects/course/vprofile.html"><span class="tree-item-title">Vprofile</span></a></div>
                              <div class="tree-item-children"></div>
                            </div>
                          </div>
                        </div>
                        <div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="4">
                          <div class="tree-item-contents">
                            <div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle">
                                <path d="M3 8L12 17L21 8"></path>
                              </svg></div><a class="tree-item-link" href="personal/it/projects/small-ones"><span class="tree-item-title">small ones</span></a>
                          </div>
                          <div class="tree-item-children">
                            <div class="tree-item mod-tree-file" data-depth="5">
                              <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/projects/small-ones/dut-configuration.html"><span class="tree-item-title">DUT Configuration</span></a></div>
                              <div class="tree-item-children"></div>
                            </div>
                            <div class="tree-item mod-tree-file" data-depth="5">
                              <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/projects/small-ones/git-hub-obsidian-sync.html"><span class="tree-item-title">Git Hub Obsidian sync</span></a></div>
                              <div class="tree-item-children"></div>
                            </div>
                            <div class="tree-item mod-tree-file" data-depth="5">
                              <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/projects/small-ones/guacamole.html"><span class="tree-item-title">Guacamole</span></a></div>
                              <div class="tree-item-children"></div>
                            </div>
                            <div class="tree-item mod-tree-file" data-depth="5">
                              <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/projects/small-ones/nginx-with-docker.html"><span class="tree-item-title">nginx with docker</span></a></div>
                              <div class="tree-item-children"></div>
                            </div>
                            <div class="tree-item mod-tree-file" data-depth="5">
                              <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/projects/small-ones/vnc-xfce-4.html"><span class="tree-item-title">VNC xfce-4</span></a></div>
                              <div class="tree-item-children"></div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="3">
                      <div class="tree-item-contents">
                        <div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle">
                            <path d="M3 8L12 17L21 8"></path>
                          </svg></div><a class="tree-item-link" href="personal/it/technologies"><span class="tree-item-title">Technologies</span></a>
                      </div>
                      <div class="tree-item-children">
                        <div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="4">
                          <div class="tree-item-contents">
                            <div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle">
                                <path d="M3 8L12 17L21 8"></path>
                              </svg></div><a class="tree-item-link" href="personal/it/technologies/devops"><span class="tree-item-title">DevOps</span></a>
                          </div>
                          <div class="tree-item-children">
                            <div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="5">
                              <div class="tree-item-contents">
                                <div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle">
                                    <path d="M3 8L12 17L21 8"></path>
                                  </svg></div><a class="tree-item-link" href="personal/it/technologies/devops/aws"><span class="tree-item-title">AWS</span></a>
                              </div>
                              <div class="tree-item-children">
                                <div class="tree-item mod-tree-file" data-depth="6">
                                  <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/technologies/devops/aws/alias-user.html"><span class="tree-item-title">Alias user</span></a></div>
                                  <div class="tree-item-children"></div>
                                </div>
                              </div>
                            </div>
                            <div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="5">
                              <div class="tree-item-contents">
                                <div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle">
                                    <path d="M3 8L12 17L21 8"></path>
                                  </svg></div><a class="tree-item-link" href="personal/it/technologies/devops/teoria"><span class="tree-item-title">Teoria</span></a>
                              </div>
                              <div class="tree-item-children">
                                <div class="tree-item mod-tree-file" data-depth="6">
                                  <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/technologies/devops/teoria/basic-term.html"><span class="tree-item-title">Basic Term</span></a></div>
                                  <div class="tree-item-children"></div>
                                </div>
                              </div>
                            </div>
                            <div class="tree-item mod-tree-file" data-depth="5">
                              <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/technologies/devops/ansible.html"><span class="tree-item-title">Ansible</span></a></div>
                              <div class="tree-item-children"></div>
                            </div>
                            <div class="tree-item mod-tree-file" data-depth="5">
                              <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/technologies/devops/docker.html"><span class="tree-item-title">Docker</span></a></div>
                              <div class="tree-item-children"></div>
                            </div>
                            <div class="tree-item mod-tree-file" data-depth="5">
                              <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/technologies/devops/github.html"><span class="tree-item-title">GitHub</span></a></div>
                              <div class="tree-item-children"></div>
                            </div>
                            <div class="tree-item mod-tree-file" data-depth="5">
                              <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/technologies/devops/jenkins.html"><span class="tree-item-title">Jenkins</span></a></div>
                              <div class="tree-item-children"></div>
                            </div>
                            <div class="tree-item mod-tree-file" data-depth="5">
                              <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/technologies/devops/networking.html"><span class="tree-item-title">Networking</span></a></div>
                              <div class="tree-item-children"></div>
                            </div>
                            <div class="tree-item mod-tree-file" data-depth="5">
                              <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/technologies/devops/vagrant.html"><span class="tree-item-title">Vagrant</span></a></div>
                              <div class="tree-item-children"></div>
                            </div>
                          </div>
                        </div>
                        <div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="4">
                          <div class="tree-item-contents">
                            <div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle">
                                <path d="M3 8L12 17L21 8"></path>
                              </svg></div><a class="tree-item-link" href="personal/it/technologies/linux"><span class="tree-item-title">Linux</span></a>
                          </div>
                          <div class="tree-item-children">
                            <div class="tree-item mod-tree-file" data-depth="5">
                              <div class="tree-item-contents"><a class="tree-item-link" href="personal/it/technologies/linux/basics.html"><span class="tree-item-title">Basics</span></a></div>
                              <div class="tree-item-children"></div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="tree-item mod-tree-file" data-depth="2">
                  <div class="tree-item-contents"><a class="tree-item-link" href="personal/personal-pc-fresh-configuration.html"><span class="tree-item-title">Personal PC Fresh configuration</span></a></div>
                  <div class="tree-item-children"></div>
                </div>
                <div class="tree-item mod-tree-file" data-depth="2">
                  <div class="tree-item-contents"><a class="tree-item-link" href="personal/todo.html"><span class="tree-item-title">TODO</span></a></div>
                  <div class="tree-item-children"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="document-container">
      <div class="markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings show-indentation-guide allow-fold-lists" style="tab-size: 4;" tabindex="-1">
        <style id="MJX-CHTML-styles"></style>
        <div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom: ; padding-top: var(--file-margins); padding-right: var(--file-margins); padding-left: var(--file-margins); width: 100%; position: absolute;">
          <div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div>
          <div class="mod-header">
            <div class="inline-title" data-heading="DUT Configuration" id="DUT_Configuration" style="display: block;">DUT Configuration</div>
          </div>
          <div>
            <p>Running this script on a fresh OS will:</p>
          </div>
          <div>
            <ul class="has-list-bullet">
              <li data-line="0">
                <div class="list-bullet"></div>Configure proxy for most uses (apt and every app that uses environmental variables as a source of proxy e.g. git)
              </li>
              <li data-line="1">
                <div class="list-bullet"></div>Update repositories without checking the date so you don't have to change it in BIOS (solving the "package is not valid yet" error)
              </li>
              <li data-line="2">
                <div class="list-bullet"></div>Install packages useful for a DUT
              </li>
              <li data-line="3">
                <div class="list-bullet"></div>Configure network manager for automatic IP discovery and turn off unattended upgrades
              </li>
              <li data-line="4">
                <div class="list-bullet"></div>Disable lock screen after S3/S4
              </li>
              <li data-line="5">
                <div class="list-bullet"></div>Allow you to sudo without typing in the password (provided user is "test")
              </li>
            </ul>
          </div>
          <div>
            <p>Set time based on google servers</p>
          </div>
          <div>
            <pre><code>sudo date -s "$(wget -qSO- --max-redirect=0 google.com 2&gt;&amp;1 | grep Date: | cut -d' ' -f5-8)Z"
</code><button class="copy-code-button">Copy</button></pre>
          </div>
          <div>
            <p>Script</p>
          </div>
          <div>
            <pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token shebang important">#!/bin/bash</span>
<span class="token function">clear</span>
<span class="token comment">#Making restarting services with outdated libraries automatic instead of interactive</span>
<span class="token function">sed</span> -i <span class="token string">'38s/.*/$nrconf{restart} = "a";/'</span> /etc/needrestart/needrestart.conf <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 

<span class="token comment">#DHCP</span>
<span class="token function">sudo</span> dhclient <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
<span class="token builtin class-name">echo</span> <span class="token string">"DHCP server found. IP set."</span>


<span class="token comment">#proxy server url</span>
<span class="token assign-left variable">server</span><span class="token operator">=</span><span class="token string">"proxy-dmz.intel.com"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Adding proxy for proxy-dmz.intel.com:911"</span>


<span class="token comment">#proxy functions</span>
<span class="token keyword">function</span> <span class="token function-name function">AddProxyLine</span> <span class="token punctuation">{</span>
  <span class="token assign-left variable">newline</span><span class="token operator">=</span><span class="token variable">$1</span>
  <span class="token assign-left variable">searchstring</span><span class="token operator">=</span><span class="token variable">$2</span>
  <span class="token comment">#Check if /etc/environment already has that variable</span>
  <span class="token assign-left variable">linenum</span><span class="token operator">=</span><span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> <span class="token string">'/etc/environment'</span> <span class="token operator">|</span> <span class="token function">grep</span> -n $<span class="token punctuation">{</span>searchstring<span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token function">grep</span> -Eo <span class="token string">'^[^:]+'</span><span class="token variable">)</span></span>"</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$?</span>"</span> -eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token assign-left variable">safenewline</span><span class="token operator">=</span><span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">"<span class="token variable">${newline}</span>"</span> <span class="token operator">|</span> <span class="token function">sed</span> -e <span class="token string">'s/[\/&amp;]/\\&amp;/g'</span><span class="token variable">)</span></span>"</span>
    <span class="token function">sudo</span> <span class="token function">sed</span> -i <span class="token string">"<span class="token variable">${linenum}</span>s/.*/<span class="token variable">${safenewline}</span>/"</span> /etc/environment <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
  <span class="token keyword">else</span>
    <span class="token comment">#Append the line to the end of the file</span>
    <span class="token function">sudo</span> <span class="token function">bash</span> -c <span class="token string">"echo '<span class="token variable">${newline}</span>' &gt;&gt; /etc/environment"</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
  <span class="token keyword">fi</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function-name function">AddAptLine</span> <span class="token punctuation">{</span>
  <span class="token assign-left variable">newline</span><span class="token operator">=</span><span class="token variable">$1</span>
  <span class="token assign-left variable">searchstring</span><span class="token operator">=</span><span class="token variable">$2</span>
  <span class="token assign-left variable">linenum</span><span class="token operator">=</span><span class="token number">0</span>
  <span class="token assign-left variable">replace</span><span class="token operator">=</span>FALSE
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -e /etc/apt/apt.conf <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token assign-left variable">linenum</span><span class="token operator">=</span><span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> <span class="token string">'/etc/apt/apt.conf'</span> <span class="token operator">|</span> <span class="token function">grep</span> -n $<span class="token punctuation">{</span>searchstring<span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token function">grep</span> -Eo <span class="token string">'^[^:]+'</span><span class="token variable">)</span></span>"</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$?</span>"</span> -eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token assign-left variable">replace</span><span class="token operator">=</span>TRUE
    <span class="token keyword">fi</span>
  <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$replace</span>"</span> <span class="token operator">=</span> <span class="token string">"TRUE"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token assign-left variable">safenewline</span><span class="token operator">=</span><span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">"<span class="token variable">${newline}</span>"</span> <span class="token operator">|</span> <span class="token function">sed</span> -e <span class="token string">'s/[\/&amp;]/\\&amp;/g'</span><span class="token variable">)</span></span>"</span>
    <span class="token function">sudo</span> <span class="token function">sed</span> -i <span class="token string">"<span class="token variable">${linenum}</span>s/.*/<span class="token variable">${safenewline}</span>/"</span> /etc/apt/apt.conf
  <span class="token keyword">else</span>
    <span class="token comment">#Append the line to the end of the file</span>
    <span class="token function">sudo</span> <span class="token function">bash</span> -c <span class="token string">"echo '<span class="token variable">${newline}</span>' &gt;&gt; /etc/apt/apt.conf"</span>
  <span class="token keyword">fi</span>
<span class="token punctuation">}</span>


<span class="token comment">#Duplicating uppercase and lowercase because of some apps</span>
AddProxyLine <span class="token string">"http_proxy=http://<span class="token variable">${server}</span>:911"</span> <span class="token string">"http_proxy"</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
AddProxyLine <span class="token string">"https_proxy=http://<span class="token variable">${server}</span>:912"</span> <span class="token string">"https_proxy"</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
AddProxyLine <span class="token string">"ftp_proxy=http://<span class="token variable">${server}</span>:911"</span> <span class="token string">"ftp_proxy"</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
AddProxyLine <span class="token string">"socks_proxy=http://<span class="token variable">${server}</span>:1080"</span> <span class="token string">"socks_proxy"</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
AddProxyLine <span class="token string">"no_proxy=intel.com,.intel.com,10.0.0.0/8,192.168.0.0/16,localhost,.local,127.0.0.0/8,172.16.0.0/12,134.134.0.0/16"</span> <span class="token string">"no_proxy"</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
AddProxyLine <span class="token string">"HTTP_PROXY=http://<span class="token variable">${server}</span>:911"</span> <span class="token string">"HTTP_PROXY"</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
AddProxyLine <span class="token string">"HTTPS_PROXY=http://<span class="token variable">${server}</span>:912"</span> <span class="token string">"HTTPS_PROXY"</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
AddProxyLine <span class="token string">"FTP_PROXY=http://<span class="token variable">${server}</span>:911"</span> <span class="token string">"FTP_PROXY"</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
AddProxyLine <span class="token string">"SOCKS_PROXY=http://<span class="token variable">${server}</span>:1080"</span> <span class="token string">"SOCKS_PROXY"</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
AddProxyLine <span class="token string">"NO_PROXY=intel.com,.intel.com,10.0.0.0/8,192.168.0.0/16,localhost,.local,127.0.0.0/8,172.16.0.0/12,134.134.0.0/16"</span> <span class="token string">"NO_PROXY"</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> AddAptLine <span class="token string">"Acquire::http::Proxy <span class="token entity" title="\&quot;">\"</span>http://<span class="token variable">${server}</span>:911<span class="token entity" title="\&quot;">\"</span>;"</span> <span class="token string">"Acquire::http::Proxy"</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
AddAptLine <span class="token string">"Acquire::ftp::Proxy <span class="token entity" title="\&quot;">\"</span>http://<span class="token variable">${server}</span>:911<span class="token entity" title="\&quot;">\"</span>;"</span> <span class="token string">"Acquire::ftp::Proxy"</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 


<span class="token comment">#Check for the existance of gsettings</span>
<span class="token builtin class-name">command</span> -v gsettings <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$?</span>"</span> -eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">sudo</span> gsettings <span class="token builtin class-name">set</span> org.gnome.system.proxy mode <span class="token string">'auto'</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
  <span class="token function">sudo</span> gsettings <span class="token builtin class-name">set</span> org.gnome.system.proxy autoconfig-url <span class="token string">'http://autoproxy.intel.com:9090'</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
  <span class="token function">sudo</span> gsettings <span class="token builtin class-name">set</span> org.gnome.system.proxy ignore-hosts <span class="token string">"['localhost', '127.0.0.0/8', '*.local', 'intel.com', '*.intel.com', '10.0.0.0/8', '192.168.0.0/16', '172.16.0.0/12', '134.134.0.0/16']"</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
  gsettings <span class="token builtin class-name">set</span> org.gnome.system.proxy mode <span class="token string">'auto'</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
  gsettings <span class="token builtin class-name">set</span> org.gnome.system.proxy autoconfig-url <span class="token string">'http://autoproxy.intel.com:9090'</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
  gsettings <span class="token builtin class-name">set</span> org.gnome.system.proxy ignore-hosts <span class="token string">"['localhost', '127.0.0.0/8', '*.local', 'intel.com', '*.intel.com', '10.0.0.0/8', '192.168.0.0/16', '172.16.0.0/12', '134.134.0.0/16']"</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
<span class="token keyword">fi</span>


<span class="token comment">#Update ignoring the date check</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Updating repositories"</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> -o Acquire::Check-Valid-Until<span class="token operator">=</span>false -o Acqiure::Check-Date<span class="token operator">=</span>false update <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
<span class="token function">sudo</span> <span class="token function">apt-get</span> -o Acquire::Check-Valid-Until<span class="token operator">=</span>false -o Acquire::Check-Date<span class="token operator">=</span>false update -y <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 


<span class="token comment">#Installing packages</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Installing necessary packages"</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> connect-proxy <span class="token function">git</span> samba <span class="token function">mc</span> network-manager -y <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 


<span class="token comment">#NetworkManager config for dhcp discovery on startup and turning off automatic upgrades</span>
<span class="token builtin class-name">echo</span> <span class="token string">$'network:<span class="token entity" title="\n">\n</span> version: 2<span class="token entity" title="\n">\n</span> renderer: NetworkManager'</span> <span class="token operator">&gt;</span> /etc/netplan/01-netcfg.yaml
<span class="token builtin class-name">echo</span> <span class="token string">"Disabling unattended updates"</span>
<span class="token function">sudo</span> <span class="token function">apt</span> remove unattended-upgrades -y <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 


<span class="token comment">#sudo without password</span>
<span class="token builtin class-name">echo</span> <span class="token string">"test   ALL=(ALL) NOPASSWD:ALL"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token assign-left variable">EDITOR</span><span class="token operator">=</span><span class="token string">"tee -a"</span> visudo <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 

<span class="token comment">#Disable lock screen after suspend/hibernate</span>
gsettings <span class="token builtin class-name">set</span> org.gnome.desktop.lockdown disable-lock-screen <span class="token string">'true'</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
gsettings <span class="token builtin class-name">set</span> org.gnome.desktop.screensaver ubuntu-lock-on-suspend <span class="token string">'false'</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 


<span class="token comment">#Reset</span>
<span class="token builtin class-name">echo</span> <span class="token string">"-------------ALL DONE------------"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"The machine will reboot now"</span>
<span class="token function">sleep</span> <span class="token number">2</span>

init <span class="token number">6</span>

</code><button class="copy-code-button">Copy</button></pre>
          </div>
          <div class="mod-footer"></div>
        </div>
      </div>
    </div>
    <div class="sidebar-right sidebar">
      <div class="sidebar-content">
        <div class="tree-container outline-tree" data-depth="0">
          <div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button"><iconify-icon icon="ph:arrows-in-line-horizontal-bold" width="18px" height="18px" rotate="90deg" color="currentColor"></iconify-icon></button></div>
          <div class="tree-scroll-area"></div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>